Health Log App Pro 🩺🌸 – 詳細機能リスト  
（最終更新 2025-06-17）

---

## 📋 目次
1. [認証 / ユーザー管理](#認証--ユーザー管理)
2. [ログ記録 📝](#ログ記録)
3. [カレンダー閲覧 📅](#カレンダー閲覧)
4. [データ同期 & 保護 ☁️🔒](#データ同期--保護)
5. [ユーザー体験 🖐](#ユーザー体験)
6. [運用・管理機能 ⚙️](#運用・管理機能)
7. [今後追加予定 🚧](#今後追加予定)

---

## 認証 / ユーザー管理
- **メールリンク方式（パスワードレス）**
  - Firebase Auth を使用。クリック一発でログイン完了  
  - 端末を跨いだ利用時もセッションを自動復元
- **ユーザープロファイル**
  - Firestore に `users/{uid}` ドキュメントを保持  
  - 表示名・タイムゾーンなどを保存（将来の多言語化に備え）

---

## ログ記録
- **3 タップ入力フロー**
  1. 体調メモ（自由入力）
  2. 薬チェックボックス
  3. 保存ボタン
- **フォームバリデーション**
  - React Hook Form + Zod（予定）で必須/文字数を制御
- **リアルタイム保存**
  - `addDoc()`／`setDoc()` 直後に UI へ即反映
- **編集 / 削除（次リリース）**
  - `updateDoc()` / `deleteDoc()` をラップした service 関数で実装予定

---

## カレンダー閲覧
- **月表示・日表示をワンタップ切替**
  - `react-calendar` をベースにカスタム
- **カレンダーバッジ**
  - 日付セルに「✔︎ / ❌ / 💊」などの簡易アイコンを表示
- **選択日フィルタ**
  - クリックされた日だけを `HealthLogList` に抽出表示
- **ページネーション**
  - 最新 10 件ロード → スクロールで追加取得（ロードマップ）

---

## データ同期 & 保護
- **Firestore セキュリティルール**
  - `match /users/{uid}/logs/{logId}` で本人のみ CRUD 可
- **オフラインキャッシュ**
  - Firestore SDK のローカルキャッシュで圏外時も入力可能
- **バックアップ & Export**
  - CSV / Markdown 形式でダウンロード（開発中）

---

## ユーザー体験
- **モバイルファースト UI**
  - ボトムシート風フォーム＋片手操作しやすい配置
- **ダークモード（ロードマップ）**
  - `prefers-color-scheme` 検知 → Tailwind `dark:` ユーティリティ適用
- **季節テーマ**
  - `src/lib/theme.ts` で色・メッセージを動的切替
- **PWA インストール対応（検討中）**

---

## 運用・管理機能
- **GitHub Actions → Vercel Preview**
  - PR 毎にプレビュー URL 自動生成
- **E2E テスト (Playwright)**
  - `npm run test:e2e` で主要フローを自動検証（整備中）
- **エラーログ**
  - `@firebase/app` エラーフック → `console.error` から Sentry 移行予定

---

## 今後追加予定
- [ ] 薬マスタのカスタマイズ（家族ごとに薬リストを編集可能）  
- [ ] Next.js 14 版の実験的実装（SSR/ISR パフォーマンス検証）  
- [ ] Lottie アニメを用いた歓迎画面  
- [ ] マルチユーザ共有モード（介護用に家族が編集閲覧できる権限設定）  
- [ ] i18n（英語／日本語の完全切り替え）  

---

> **備考**  
> - README では “概要” を簡潔に、本ファイルで詳細と方針を管理  
> - issue / discussion と連携して随時アップデートすることを推奨
